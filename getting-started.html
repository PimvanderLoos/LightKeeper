<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LightKeeper - Getting Started</title>
    <meta name="description" content="Set up LightKeeper for Maven integration tests in a few steps.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@500;600;700&family=Inter:wght@400;500;700&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/styles.css">
    <script defer src="assets/main.js"></script>
</head>
<body>
<header class="site-header">
    <a class="brand" href="index.html">LightKeeper</a>
    <button class="menu-toggle" type="button" aria-expanded="false" aria-label="Toggle navigation">Menu</button>
    <nav class="site-nav">
        <a href="getting-started.html">Getting Started</a>
        <a href="features.html">Features</a>
        <a href="architecture.html">Architecture</a>
        <a href="faq.html">FAQ</a>
    </nav>
</header>

<main>
    <section class="hero reveal">
        <p class="eyebrow">Getting Started</p>
        <h1>From zero to full server integration test.</h1>
        <p class="lead">Use this as your baseline setup for a Maven project that tests a plugin on real Paper/Spigot runtimes.</p>
    </section>

    <section class="panel reveal">
        <h2>Prerequisites</h2>
        <ul class="checklist">
            <li>Java 21</li>
            <li>Maven 3.9+</li>
            <li>Linux or macOS recommended (UDS transport)</li>
        </ul>
    </section>

    <section class="panel reveal">
        <h2>1. Add framework dependency</h2>
        <pre><code>&lt;dependency&gt;
    &lt;groupId&gt;nl.pim16aap2.lightkeeper&lt;/groupId&gt;
    &lt;artifactId&gt;lightkeeper-framework-junit&lt;/artifactId&gt;
    &lt;version&gt;${lightkeeper.version}&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
    </section>

    <section class="panel reveal">
        <h2>2. Configure prepare + cleanup goals</h2>
        <pre><code>&lt;plugin&gt;
    &lt;groupId&gt;nl.pim16aap2.lightkeeper&lt;/groupId&gt;
    &lt;artifactId&gt;lightkeeper-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;${lightkeeper.version}&lt;/version&gt;
    &lt;configuration&gt;
        &lt;userAgent&gt;LightKeeper/${project.version} ([email protected])&lt;/userAgent&gt;
        &lt;agentJarPath&gt;${project.build.directory}/lightkeeper-agent/lightkeeper-agent-paper.jar&lt;/agentJarPath&gt;
    &lt;/configuration&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;prepare-server&lt;/id&gt;
            &lt;goals&gt;&lt;goal&gt;prepare-server&lt;/goal&gt;&lt;/goals&gt;
            &lt;configuration&gt;
                &lt;serverType&gt;paper&lt;/serverType&gt;
                &lt;runtimeManifestPath&gt;${project.build.directory}/lightkeeper/runtime-manifest.json&lt;/runtimeManifestPath&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
            &lt;id&gt;cleanup-server&lt;/id&gt;
            &lt;phase&gt;post-integration-test&lt;/phase&gt;
            &lt;goals&gt;&lt;goal&gt;cleanup-server&lt;/goal&gt;&lt;/goals&gt;
            &lt;configuration&gt;
                &lt;deleteTargetServerOnSuccess&gt;true&lt;/deleteTargetServerOnSuccess&gt;
                &lt;failsafeSummaryPath&gt;${project.build.directory}/failsafe-reports/failsafe-summary.xml&lt;/failsafeSummaryPath&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;</code></pre>
    </section>

    <section class="panel reveal">
        <h2>3. Pass runtime manifest to tests</h2>
        <pre><code>&lt;systemPropertyVariables&gt;
    &lt;lightkeeper.runtimeManifestPath&gt;
        ${project.build.directory}/lightkeeper/runtime-manifest.json
    &lt;/lightkeeper.runtimeManifestPath&gt;
&lt;/systemPropertyVariables&gt;</code></pre>
    </section>

    <section class="panel reveal">
        <h2>4. Write your first test</h2>
        <pre><code>@ExtendWith(LightkeeperExtension.class)
class MyPluginIT {
    @Test
    void basicFlow(ILightkeeperFramework framework) {
        final var world = framework.mainWorld();
        final var player = framework.createPlayer("lk_tester", world);

        player.placeBlock("minecraft:stone", 1, 100, 0).andWaitTicks(1);
        assertThat(world).hasBlockAt(1, 100, 0).ofType("minecraft:stone");
    }
}</code></pre>
    </section>
</main>

<footer class="site-footer">
    <p>Need full examples? See integration tests in <code>lightkeeper-maven-plugin-test</code>.</p>
</footer>
</body>
</html>
